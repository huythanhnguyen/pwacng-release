@-webkit-keyframes flash {
    0% {
        filter: alpha(opacity=0);
        -moz-opacity: 0;
        opacity: 0;
    }
    50% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    100% {
        filter: alpha(opacity=0);
        -moz-opacity: 0;
        opacity: 0;
    }
}

@keyframes flash {
    0% {
        filter: alpha(opacity=0);
        -moz-opacity: 0;
        opacity: 0;
    }
    50% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    100% {
        filter: alpha(opacity=0);
        -moz-opacity: 0;
        opacity: 0;
    }
}
@-webkit-keyframes pulse {
    0% {
        -webkit-transform: translate(-50%, -50%) scale(0.5);
        transform: translate(-50%, -50%) scale(0.5);
        filter: alpha(opacity=50);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
    25% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    50% {
        -webkit-transform: translate(-50%, -50%) scale(1.5);
        transform: translate(-50%, -50%) scale(1.5);
        filter: alpha(opacity=0.5);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
    75% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    100% {
        -webkit-transform: translate(-50%, -50%) scale(0.5);
        transform: translate(-50%, -50%) scale(0.5);
        filter: alpha(opacity=50);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
}

@keyframes pulse {
    0% {
        -webkit-transform: translate(-50%, -50%) scale(0.5);
        transform: translate(-50%, -50%) scale(0.5);
        filter: alpha(opacity=50);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
    25% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    50% {
        -webkit-transform: translate(-50%, -50%) scale(1.5);
        transform: translate(-50%, -50%) scale(1.5);
        filter: alpha(opacity=0.5);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
    75% {
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        opacity: 1;
    }
    100% {
        -webkit-transform: translate(-50%, -50%) scale(0.5);
        transform: translate(-50%, -50%) scale(0.5);
        filter: alpha(opacity=50);
        -moz-opacity: 0.5;
        opacity: 0.5;
    }
}

.root {
    composes: flex from global;
    composes: gap-2 from global;
    composes: ml-auto from global;
}

.voiceTrigger {
    width: 32px;
    height: 32px;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cmask id='mask0_15761_40362' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='24' height='24'%3E%3Crect width='24' height='24' fill='%23D9D9D9'/%3E%3C/mask%3E%3Cg mask='url(%23mask0_15761_40362)'%3E%3Cpath d='M11.9996 13.5C11.301 13.5 10.7096 13.258 10.2256 12.774C9.74162 12.29 9.49962 11.6987 9.49962 11V5C9.49962 4.30133 9.74162 3.71 10.2256 3.226C10.7096 2.742 11.301 2.5 11.9996 2.5C12.6983 2.5 13.2896 2.742 13.7736 3.226C14.2576 3.71 14.4996 4.30133 14.4996 5V11C14.4996 11.6987 14.2576 12.29 13.7736 12.774C13.2896 13.258 12.6983 13.5 11.9996 13.5ZM11.2496 20V17.4538C9.76112 17.2819 8.48545 16.6704 7.42262 15.6193C6.35995 14.5679 5.73753 13.2865 5.55537 11.775C5.52853 11.5622 5.58428 11.3798 5.72262 11.228C5.86112 11.076 6.03678 11 6.24962 11C6.46245 11 6.64062 11.0734 6.78412 11.2203C6.92778 11.3669 7.02337 11.5467 7.07087 11.7595C7.25287 12.984 7.81278 13.9968 8.75062 14.798C9.68845 15.5993 10.7715 16 11.9996 16C13.2445 16 14.3316 15.5952 15.2611 14.7855C16.1906 13.976 16.7464 12.9673 16.9284 11.7595C16.9759 11.5467 17.0715 11.3669 17.2151 11.2203C17.3586 11.0734 17.5368 11 17.7496 11C17.9625 11 18.1381 11.076 18.2766 11.228C18.415 11.3798 18.4707 11.5622 18.4439 11.775C18.2617 13.2532 17.6435 14.5247 16.5891 15.5895C15.5346 16.6542 14.2548 17.2756 12.7496 17.4538V20C12.7496 20.2128 12.6778 20.391 12.5341 20.5345C12.3906 20.6782 12.2125 20.75 11.9996 20.75C11.7868 20.75 11.6086 20.6782 11.4651 20.5345C11.3215 20.391 11.2496 20.2128 11.2496 20Z' fill='%232A2F33'/%3E%3C/g%3E%3C/svg%3E") no-repeat center / 24px;

    span {
        display: none;
    }

    :global(.aiChatbot) & {
        filter: invert(32%) sepia(85%) saturate(1500%) hue-rotate(190deg) brightness(80%) contrast(100%);
    }
}

.rootAbsolute {
    .voiceTrigger,
    .voicePause {
        @apply absolute;
        @apply top-0;
        @apply right-9;
        margin-top: -38px;
    }

    .voicePause {
        width: 32px;
        height: 32px;
        background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --%3E%3Csvg width='800px' height='800px' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 5V19M16 5V19' stroke='%230272ba' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    }
}

.voicePause {
    composes: root_highPriority from '../Button/extendStyle/button.module.scss';
    position: relative;
    width: 40px;
    height: 40px;
    padding: 8px;
    background: none;
    box-shadow: none;
    border-radius: 99px;

    span {
        display: none;
    }

    &:after {
        content: "";
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        border-radius: 99px;
        background: #0272BA url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cmask id='mask0_15761_41960' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='24' height='24'%3E%3Crect width='24' height='24' fill='%23D9D9D9'/%3E%3C/mask%3E%3Cg mask='url(%23mask0_15761_41960)'%3E%3Cpath d='M11.9996 13.5C11.301 13.5 10.7096 13.258 10.2256 12.774C9.74162 12.29 9.49962 11.6987 9.49962 11V5C9.49962 4.30133 9.74162 3.71 10.2256 3.226C10.7096 2.742 11.301 2.5 11.9996 2.5C12.6983 2.5 13.2896 2.742 13.7736 3.226C14.2576 3.71 14.4996 4.30133 14.4996 5V11C14.4996 11.6987 14.2576 12.29 13.7736 12.774C13.2896 13.258 12.6983 13.5 11.9996 13.5ZM11.2496 20V17.4538C9.76112 17.2819 8.48545 16.6704 7.42262 15.6193C6.35995 14.5679 5.73753 13.2865 5.55537 11.775C5.52853 11.5622 5.58428 11.3798 5.72262 11.228C5.86112 11.076 6.03678 11 6.24962 11C6.46245 11 6.64062 11.0734 6.78412 11.2203C6.92778 11.3669 7.02337 11.5467 7.07087 11.7595C7.25287 12.984 7.81278 13.9968 8.75062 14.798C9.68845 15.5993 10.7715 16 11.9996 16C13.2445 16 14.3316 15.5952 15.2611 14.7855C16.1906 13.976 16.7464 12.9673 16.9284 11.7595C16.9759 11.5467 17.0715 11.3669 17.2151 11.2203C17.3586 11.0734 17.5368 11 17.7496 11C17.9625 11 18.1381 11.076 18.2766 11.228C18.415 11.3798 18.4707 11.5622 18.4439 11.775C18.2617 13.2532 17.6435 14.5247 16.5891 15.5895C15.5346 16.6542 14.2548 17.2756 12.7496 17.4538V20C12.7496 20.2128 12.6778 20.391 12.5341 20.5345C12.3906 20.6782 12.2125 20.75 11.9996 20.75C11.7868 20.75 11.6086 20.6782 11.4651 20.5345C11.3215 20.391 11.2496 20.2128 11.2496 20ZM11.9996 12C12.283 12 12.5205 11.9042 12.7121 11.7125C12.9038 11.5208 12.9996 11.2833 12.9996 11V5C12.9996 4.71667 12.9038 4.47917 12.7121 4.2875C12.5205 4.09583 12.283 4 11.9996 4C11.7163 4 11.4788 4.09583 11.2871 4.2875C11.0955 4.47917 10.9996 4.71667 10.9996 5V11C10.9996 11.2833 11.0955 11.5208 11.2871 11.7125C11.4788 11.9042 11.7163 12 11.9996 12Z' fill='white'/%3E%3C/g%3E%3C/svg%3E") no-repeat center / 24px;
    }

    &:before {
        content: "";
        display: block;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        height: 100%;
        background-color: #cde7f9;
        border-radius: 50%;
        box-shadow: 0 2px 6px 0 rgba(2, 114, 186, 0.24);
        transform: translate(-50%, -50%);
        -webkit-animation: pulse 1.2s infinite ease-in-out;
        animation: pulse 1.2s infinite ease-in-out;
    }

    ~ :global(.searchAISubmit) {
        display: none;
    }
}

.recording {
    composes: flex from global;
    composes: items-center from global;
    composes: gap-2 from global;
    composes: mt-2 from global;

    &:before {
        content: "";
        display: block;
        width: 6px;
        height: 6px;
        background: #E82230;
        border-radius: 50%;
        -webkit-animation: flash 1.2s infinite ease-in-out;
        animation: flash 1.2s infinite ease-in-out;
    }
}

.recordingIcon {
    composes: flex from global;
    composes: items-center from global;
    composes: justify-center from global;
    gap: 3px;
    height: 20px;
    transform-origin: center;
}
.recordingIcon span{
    width:2px;
    height:30%;
    border-radius: 9px;
    background:#2A2F33;
    display:block;
    animation:vu 1.1s ease-in-out infinite;
    animation-delay:calc(var(--i)*0.12s);
}
.recordingIcon span:nth-child(1){height:40%}
.recordingIcon span:nth-child(2){height:70%}
.recordingIcon span:nth-child(3){height:100%}
.recordingIcon span:nth-child(4){height:70%}
.recordingIcon span:nth-child(5){height:40%}
@keyframes vu{
    0%,100%{transform:scaleY(0.35)}
    50%{transform:scaleY(1)}
}

// New styles for pitch analysis and speech-to-text
.languageSelector {
    composes: mb-2 from global;
}

.languageSelect {
    composes: px-3 from global;
    composes: py-1 from global;
    composes: text-sm from global;
    composes: border from global;
    composes: border-gray-300 from global;
    composes: rounded-md from global;
    composes: bg-white from global;
    composes: focus_outline-none from global;
    composes: focus_ring-2 from global;
    composes: focus_ring-blue-500 from global;
    min-width: 160px;
    font-family: system-ui, -apple-system, sans-serif;
}

.recordingContainer {
}

.recordingHeader {
    composes: flex from global;
    composes: items-center from global;
    composes: justify-between from global;
    composes: w-full from global;
    composes: gap-4 from global;
}

.currentLanguage {
    composes: hidden from global;
    composes: items-center from global;
    composes: gap-2 from global;
    composes: text-sm from global;
    composes: font-medium from global;
    composes: text-gray-700 from global;
    composes: bg-gray-100 from global;
    composes: px-3 from global;
    composes: py-1 from global;
    composes: rounded-full from global;
}

.listeningIndicator {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.pitchDisplay {
    composes: hidden from global;
}

.pitchInfo {
    composes: flex from global;
    composes: justify-between from global;
    composes: items-center from global;
    composes: w-full from global;
    composes: text-xs from global;
    composes: text-gray-600 from global;
    composes: flex-wrap from global;
    composes: gap-2 from global;
}

.pitchValue {
    composes: font-semibold from global;
    composes: text-sm from global;
    color: #0272BA;
}

.volumeValue {
    composes: font-semibold from global;
    composes: text-sm from global;
    color: #059669;
}

.recordingTime {
    composes: text-gray-500 from global;
}

.waveformCanvas {
    composes: border from global;
    composes: border-gray-200 from global;
    composes: rounded-lg from global;
    composes: bg-gray-50 from global;
    composes: w-full from global;
    width: 100%;
    max-width: 300px;
    height: 100px;
}

.transcriptionContainer {
    composes: hidden from global;
    composes: flex-col from global;
    composes: gap-1 from global;
    composes: w-full from global;
    composes: bg-gray-50 from global;
    composes: rounded-lg from global;
    composes: p-3 from global;
    border-left: 4px solid #0272BA;
    max-width: 100%;
}

.transcriptionLabel {
    composes: text-xs from global;
    composes: font-semibold from global;
    composes: uppercase from global;
    composes: tracking-wide from global;
    color: #0272BA;
}

.transcriptionText {
    composes: text-sm from global;
    composes: text-gray-800 from global;
    line-height: 1.4;
    max-height: 100px;
    overflow-y: auto;
    word-wrap: break-word;
    min-height: 20px;
}

.transcriptionPlaceholder {
    composes: text-gray-500 from global;
    composes: italic from global;
}

// Auto-detection specific styles
.autoDetectInfo {
    composes: hidden from global;
    composes: mb-2 from global;
    composes: text-center from global;
}

.autoDetectLabel {
    composes: text-sm from global;
    composes: font-medium from global;
    composes: text-blue-600 from global;
    composes: bg-blue-50 from global;
    composes: px-3 from global;
    composes: py-1 from global;
    composes: rounded-full from global;
    composes: border from global;
    composes: border-blue-200 from global;
}

.detectingIndicator {
    composes: text-sm from global;
    composes: font-medium from global;
    composes: text-orange-600 from global;
    animation: detectingPulse 1.5s ease-in-out infinite;
}

.detectedFlag {
    composes: text-lg from global;
}

.detectedLanguage {
    composes: font-medium from global;
}

.autoDetectedBadge {
    composes: text-xs from global;
    composes: bg-green-100 from global;
    composes: text-green-700 from global;
    composes: px-2 from global;
    composes: py-1 from global;
    composes: rounded-full from global;
    composes: ml-2 from global;
    font-size: 10px;
}

.startingBadge {
    composes: text-xs from global;
    composes: bg-gray-100 from global;
    composes: text-gray-600 from global;
    composes: px-2 from global;
    composes: py-1 from global;
    composes: rounded-full from global;
    composes: ml-2 from global;
    font-size: 10px;
}

@keyframes detectingPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}
